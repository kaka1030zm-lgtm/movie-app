import { useState, useEffect } from "react";

// 辞書データ
const resources: Record<string, any> = {
  ja: {
    // 検索・リスト
    searchPlaceholder: "映画のタイトルで検索...",
    popular: "人気の映画",
    recommended: "おすすめの映画",
    recommendationSub: "見たいリストに基づくおすすめ",
    searchResults: "検索結果",
    japan: "日本",
    global: "世界で人気の映画",
    myReviews: "マイレビュー",
    watchlist: "見たいリスト",
    noReviews: "まだ保存されたレビューがありません。作品を選んでフォームから保存してみてください。",
    noWatchlist: "見たいリストは空です。",
    searchHelper: "タイトルで検索し、追加する作品を選択できます。",
    demoSearch: "デモ検索中: TMDB APIキーが未設定のためサンプルを表示しています。",
    search: "検索",
    noOverview: "概要情報がありません。",
    
    // モーダル・ボタン
    writeReview: "レビューを書く",
    editReview: "レビューを編集",
    updateReview: "レビューを更新",
    update: "レビューを更新",
    close: "閉じる",
    back: "戻る",
    save: "レビューを保存",
    addToWatchlist: "見たいリストに追加",
    removeFromWatchlist: "リストから削除",
    watch: "見たいリスト",
    processing: "処理中...",
    tmdbSearch: "TMDB検索",
    
    // フォーム
    platform: "視聴プラットフォーム",
    platformSub: "プラットフォーム",
    story: "ストーリー構成",
    acting: "演技・配役",
    visuals: "映像・演出",
    music: "音楽・音響",
    originality: "独創性・世界観",
    emotional: "感情入度",
    reviewBody: "レビュー本文",
    placeholderBody: "印象的なシーン、好きなセリフ、感じた余韻などをメモ...",
    reviewPlaceholder: "ここにレビューを書く...",
    shareThoughts: "あなたの想いを共有",
    
    // 削除確認
    confirmDeleteReview: "このレビューを削除しますか？",
    confirmDeleteWatchlist: "この作品をリストから削除しますか？",
    cancel: "キャンセル",
    delete: "削除する",
  },
  en: {
    // Search / List
    searchPlaceholder: "Search movie titles...",
    popular: "Popular Movies",
    recommended: "Recommended Movies",
    recommendationSub: "Based on your Watchlist",
    searchResults: "Search Results",
    japan: "Japan",
    global: "Global Trending",
    myReviews: "My Reviews",
    watchlist: "Watchlist",
    noReviews: "No reviews yet. Select a movie and save from the form.",
    noWatchlist: "Your watchlist is empty.",
    searchHelper: "Search by title and select a movie to add.",
    demoSearch: "Demo search: Sample movies are displayed because TMDB API key is not set.",
    search: "Search",
    noOverview: "No overview available.",

    // Modal / Buttons
    writeReview: "Write Review",
    editReview: "Edit Review",
    updateReview: "Update Review",
    update: "Update Review",
    close: "Close",
    back: "Back",
    save: "Save Review",
    addToWatchlist: "Add to Watchlist",
    removeFromWatchlist: "Remove from Watchlist",
    watch: "Watchlist",
    processing: "Processing...",
    tmdbSearch: "TMDB Search",

    // Form
    platform: "Platform",
    platformSub: "PLATFORM",
    story: "Story",
    acting: "Acting",
    visuals: "Visuals",
    music: "Music",
    originality: "Originality",
    emotional: "Emotion",
    reviewBody: "Review Body",
    placeholderBody: "Notes on memorable scenes, quotes, lingering feelings...",
    reviewPlaceholder: "Share your thoughts...",
    shareThoughts: "Share your thoughts",

    // Delete Confirm
    confirmDeleteReview: "Delete this review?",
    confirmDeleteWatchlist: "Remove from watchlist?",
    cancel: "Cancel",
    delete: "Delete",
  },
  es: {
    // Búsqueda / Lista
    searchPlaceholder: "Buscar películas...",
    popular: "Películas Populares",
    recommended: "Recomendados",
    recommendationSub: "Basado en tu lista",
    searchResults: "Resultados de búsqueda",
    japan: "Japón",
    global: "Tendencia Global",
    myReviews: "Mis Reseñas",
    watchlist: "Lista de seguimiento",
    noReviews: "Aún no hay reseñas. Selecciona una película y guárdala desde el formulario.",
    noWatchlist: "Tu lista está vacía.",
    searchHelper: "Busca por título y selecciona una película para agregar.",
    demoSearch: "Búsqueda demo: Se muestran películas de muestra porque la clave API de TMDB no está configurada.",
    search: "Buscar",
    noOverview: "No hay información disponible.",
    // Modal / Botones
    writeReview: "Escribir reseña",
    editReview: "Editar reseña",
    updateReview: "Actualizar reseña",
    update: "Actualizar reseña",
    close: "Cerrar",
    back: "Atrás",
    save: "Guardar reseña",
    addToWatchlist: "Añadir a la lista",
    removeFromWatchlist: "Eliminar de la lista",
    watch: "Lista de seguimiento",
    processing: "Procesando...",
    tmdbSearch: "Búsqueda TMDB",
    // Formulario
    platform: "Plataforma",
    platformSub: "PLATAFORMA",
    story: "Historia",
    acting: "Actuación",
    visuals: "Visuales",
    music: "Música",
    originality: "Originalidad",
    emotional: "Emoción",
    reviewBody: "Cuerpo de la reseña",
    placeholderBody: "Notas sobre escenas memorables, citas, sentimientos persistentes...",
    reviewPlaceholder: "Comparte tus pensamientos...",
    shareThoughts: "Comparte tus pensamientos",
    // Confirmar Eliminación
    confirmDeleteReview: "¿Eliminar esta reseña?",
    confirmDeleteWatchlist: "¿Eliminar de la lista?",
    cancel: "Cancelar",
    delete: "Eliminar",
  },
  fr: {
    // Recherche / Liste
    searchPlaceholder: "Rechercher des films...",
    popular: "Films Populaires",
    recommended: "Recommandés",
    recommendationSub: "Basé sur votre liste",
    searchResults: "Résultats de recherche",
    japan: "Japon",
    global: "Tendances Mondiales",
    myReviews: "Mes Critiques",
    watchlist: "Ma Liste",
    noReviews: "Aucune critique pour le moment. Sélectionnez un film et enregistrez-le depuis le formulaire.",
    noWatchlist: "Votre liste est vide.",
    searchHelper: "Recherchez par titre et sélectionnez un film à ajouter.",
    demoSearch: "Recherche démo: Des films d'exemple sont affichés car la clé API TMDB n'est pas configurée.",
    search: "Rechercher",
    noOverview: "Aucune information disponible.",
    // Modal / Boutons
    writeReview: "Écrire une critique",
    editReview: "Modifier la critique",
    updateReview: "Mettre à jour la critique",
    update: "Mettre à jour la critique",
    close: "Fermer",
    back: "Retour",
    save: "Enregistrer la critique",
    addToWatchlist: "Ajouter à la liste",
    removeFromWatchlist: "Retirer de la liste",
    watch: "Ma Liste",
    processing: "Traitement...",
    tmdbSearch: "Recherche TMDB",
    // Formulaire
    platform: "Plateforme",
    platformSub: "PLATEFORME",
    story: "Histoire",
    acting: "Jeu d'acteur",
    visuals: "Visuels",
    music: "Musique",
    originality: "Originalité",
    emotional: "Émotion",
    reviewBody: "Corps de la critique",
    placeholderBody: "Notes sur des scènes mémorables, citations, sentiments persistants...",
    reviewPlaceholder: "Partagez vos pensées...",
    shareThoughts: "Partagez vos pensées",
    // Confirmer Suppression
    confirmDeleteReview: "Supprimer cette critique?",
    confirmDeleteWatchlist: "Retirer de la liste?",
    cancel: "Annuler",
    delete: "Supprimer",
  },
  de: {
    // Suche / Liste
    searchPlaceholder: "Filme suchen...",
    popular: "Beliebte Filme",
    recommended: "Empfohlen",
    recommendationSub: "Basierend auf Ihrer Liste",
    searchResults: "Suchergebnisse",
    japan: "Japan",
    global: "Globale Trends",
    myReviews: "Meine Bewertungen",
    watchlist: "Merkliste",
    noReviews: "Noch keine Bewertungen. Wählen Sie einen Film aus und speichern Sie ihn über das Formular.",
    noWatchlist: "Ihre Liste ist leer.",
    searchHelper: "Suchen Sie nach Titel und wählen Sie einen Film zum Hinzufügen aus.",
    demoSearch: "Demo-Suche: Beispiel-Filme werden angezeigt, da der TMDB API-Schlüssel nicht gesetzt ist.",
    search: "Suchen",
    noOverview: "Keine Informationen verfügbar.",
    // Modal / Buttons
    writeReview: "Kritik schreiben",
    editReview: "Kritik bearbeiten",
    updateReview: "Kritik aktualisieren",
    update: "Kritik aktualisieren",
    close: "Schließen",
    back: "Zurück",
    save: "Bewertung speichern",
    addToWatchlist: "Zur Liste hinzufügen",
    removeFromWatchlist: "Von Liste entfernen",
    watch: "Merkliste",
    processing: "Verarbeitung...",
    tmdbSearch: "TMDB-Suche",
    // Formular
    platform: "Plattform",
    platformSub: "PLATTFORM",
    story: "Geschichte",
    acting: "Schauspiel",
    visuals: "Visuelles",
    music: "Musik",
    originality: "Originalität",
    emotional: "Emotion",
    reviewBody: "Bewertungstext",
    placeholderBody: "Notizen zu unvergesslichen Szenen, Zitaten, nachklingenden Gefühlen...",
    reviewPlaceholder: "Teilen Sie Ihre Gedanken...",
    shareThoughts: "Teilen Sie Ihre Gedanken",
    // Löschen Bestätigen
    confirmDeleteReview: "Diese Bewertung löschen?",
    confirmDeleteWatchlist: "Von Liste entfernen?",
    cancel: "Abbrechen",
    delete: "Löschen",
  },
  ko: {
    // 검색 / 목록
    searchPlaceholder: "영화 제목 검색...",
    popular: "인기 영화",
    recommended: "추천 영화",
    recommendationSub: "보고 싶은 리스트 기반 추천",
    searchResults: "검색 결과",
    japan: "일본",
    global: "글로벌 트렌드",
    myReviews: "내 리뷰",
    watchlist: "보고 싶은 리스트",
    noReviews: "아직 저장된 리뷰가 없습니다. 작품을 선택하고 폼에서 저장해보세요.",
    noWatchlist: "보고 싶은 리스트가 비어있습니다.",
    searchHelper: "제목으로 검색하고 추가할 작품을 선택할 수 있습니다.",
    demoSearch: "데모 검색: TMDB API 키가 설정되지 않아 샘플을 표시하고 있습니다.",
    search: "검색",
    noOverview: "개요 정보가 없습니다.",
    // 모달 / 버튼
    writeReview: "리뷰 작성",
    editReview: "리뷰 편집",
    updateReview: "리뷰 업데이트",
    update: "리뷰 업데이트",
    close: "닫기",
    back: "뒤로",
    save: "리뷰 저장",
    addToWatchlist: "보고 싶은 리스트에 추가",
    removeFromWatchlist: "리스트에서 삭제",
    watch: "보고 싶은 리스트",
    processing: "처리 중...",
    tmdbSearch: "TMDB 검색",
    // 폼
    platform: "시청 플랫폼",
    platformSub: "플랫폼",
    story: "스토리 구성",
    acting: "연기·배역",
    visuals: "영상·연출",
    music: "음악·음향",
    originality: "독창성·세계관",
    emotional: "감정 이입도",
    reviewBody: "리뷰 본문",
    placeholderBody: "인상적인 장면, 좋아하는 대사, 느낀 여운 등을 메모...",
    reviewPlaceholder: "여기에 리뷰를 작성하세요...",
    shareThoughts: "당신의 생각을 공유하세요",
    // 삭제 확인
    confirmDeleteReview: "이 리뷰를 삭제하시겠습니까?",
    confirmDeleteWatchlist: "이 작품을 리스트에서 삭제하시겠습니까?",
    cancel: "취소",
    delete: "삭제",
  },
  zh: {
    // 搜索 / 列表
    searchPlaceholder: "搜索电影标题...",
    popular: "热门电影",
    recommended: "推荐电影",
    recommendationSub: "基于您的待看清单",
    searchResults: "搜索结果",
    japan: "日本",
    global: "全球趋势",
    myReviews: "我的评论",
    watchlist: "待看清单",
    noReviews: "还没有保存的评论。请选择一部作品并从表单中保存。",
    noWatchlist: "您的待看清单是空的。",
    searchHelper: "按标题搜索并选择要添加的作品。",
    demoSearch: "演示搜索：由于未设置TMDB API密钥，正在显示示例电影。",
    search: "搜索",
    noOverview: "没有可用信息。",
    // 模态框 / 按钮
    writeReview: "写影评",
    editReview: "编辑评论",
    updateReview: "更新评论",
    update: "更新评论",
    close: "关闭",
    back: "返回",
    save: "保存评论",
    addToWatchlist: "添加到待看清单",
    removeFromWatchlist: "从清单中删除",
    watch: "待看清单",
    processing: "处理中...",
    tmdbSearch: "TMDB搜索",
    // 表单
    platform: "观看平台",
    platformSub: "平台",
    story: "故事构成",
    acting: "演技·选角",
    visuals: "影像·演出",
    music: "音乐·音效",
    originality: "独创性·世界观",
    emotional: "情感投入度",
    reviewBody: "评论正文",
    placeholderBody: "记录印象深刻的场景、喜欢的台词、感受到的余韵等...",
    reviewPlaceholder: "在这里写评论...",
    shareThoughts: "分享您的想法",
    // 删除确认
    confirmDeleteReview: "要删除此评论吗？",
    confirmDeleteWatchlist: "要从清单中删除此作品吗？",
    cancel: "取消",
    delete: "删除",
  },
  hi: {
    // खोज / सूची
    searchPlaceholder: "फिल्म शीर्षक खोजें...",
    popular: "लोकप्रिय फिल्में",
    recommended: "अनुशंसित फिल्में",
    recommendationSub: "आपकी वॉचलिस्ट के आधार पर",
    searchResults: "खोज परिणाम",
    japan: "जापान",
    global: "वैश्विक ट्रेंड",
    myReviews: "मेरी समीक्षाएं",
    watchlist: "वॉचलिस्ट",
    noReviews: "अभी तक कोई समीक्षा नहीं है। एक फिल्म चुनें और फॉर्म से सहेजें।",
    noWatchlist: "आपकी वॉचलिस्ट खाली है।",
    searchHelper: "शीर्षक से खोजें और जोड़ने के लिए एक फिल्म चुनें।",
    demoSearch: "डेमो खोज: TMDB API कुंजी सेट नहीं होने के कारण नमूना फिल्में प्रदर्शित की जा रही हैं।",
    search: "खोजें",
    noOverview: "कोई जानकारी उपलब्ध नहीं है।",
    // मोडल / बटन
    writeReview: "समीक्षा लिखें",
    editReview: "समीक्षा संपादित करें",
    updateReview: "समीक्षा अपडेट करें",
    update: "समीक्षा अपडेट करें",
    close: "बंद करें",
    back: "वापस",
    save: "समीक्षा सहेजें",
    addToWatchlist: "वॉचलिस्ट में जोड़ें",
    removeFromWatchlist: "सूची से हटाएं",
    watch: "वॉचलिस्ट",
    processing: "प्रसंस्करण...",
    tmdbSearch: "TMDB खोज",
    // फॉर्म
    platform: "प्लेटफॉर्म",
    platformSub: "प्लेटफॉर्म",
    story: "कहानी",
    acting: "अभिनय",
    visuals: "दृश्य",
    music: "संगीत",
    originality: "मौलिकता",
    emotional: "भावना",
    reviewBody: "समीक्षा पाठ",
    placeholderBody: "यादगार दृश्यों, उद्धरणों, लगातार भावनाओं पर नोट्स...",
    reviewPlaceholder: "अपने विचार साझा करें...",
    shareThoughts: "अपने विचार साझा करें",
    // हटाना पुष्टि करें
    confirmDeleteReview: "इस समीक्षा को हटाएं?",
    confirmDeleteWatchlist: "सूची से हटाएं?",
    cancel: "रद्द करें",
    delete: "हटाएं",
  },
};

export const useTranslation = () => {
  const [language, setLanguage] = useState<string>("ja");
  const [apiLang, setApiLang] = useState<string>("ja-JP");

  useEffect(() => {
    const browserFull = navigator.language; // "es-ES", "fr-FR", "ko-KR" など
    const browserShort = browserFull.split("-")[0]; // "es", "fr", "ko" など

    // API用: ブラウザの言語設定をそのまま使用（未検出なら "en-US"）
    setApiLang(browserFull || "en-US");

    // UI用: resourcesに存在する言語ならその言語、存在しない場合は英語をフォールバック
    if (resources[browserShort as keyof typeof resources]) {
      setLanguage(browserShort);
    } else {
      setLanguage("en");
    }
  }, []);

  return { t: resources[language as keyof typeof resources] || resources["en"], lang: language, apiLang };
};

